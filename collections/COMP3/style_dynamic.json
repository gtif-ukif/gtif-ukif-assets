{
  "fill-color": [
    "case",
    [
      "all",
      [
        "<",
        [
          "match",
          ["get", "MEDIAN_BER"],
          "A1",
          1,
          "A2",
          1.33,
          "A3",
          1.66,
          "B1",
          2,
          "B2",
          2.33,
          "B3",
          2.66,
          "C1",
          3,
          "C2",
          3.33,
          "C3",
          3.66,
          "D1",
          4,
          "D2",
          4.33,
          "D3",
          4.66,
          "E1",
          5,
          "E2",
          5.33,
          "E3",
          5.66,
          "F1",
          6,
          "F2",
          6.33,
          "F3",
          6.66,
          "G1",
          7,
          "G2",
          7.33,
          "G3",
          7.66,
          0
        ],
        ["var", "ber_min"]
      ],
      ["<", ["get", "mean_uhi"], ["var", "mean_uhi_min"]]
    ],
    [0, 255, 0, 1],
    [
      "all",
      [
        ">",
        [
          "match",
          ["get", "MEDIAN_BER"],
          "A1",
          1,
          "A2",
          1.33,
          "A3",
          1.66,
          "B1",
          2,
          "B2",
          2.33,
          "B3",
          2.66,
          "C1",
          3,
          "C2",
          3.33,
          "C3",
          3.66,
          "D1",
          4,
          "D2",
          4.33,
          "D3",
          4.66,
          "E1",
          5,
          "E2",
          5.33,
          "E3",
          5.66,
          "F1",
          6,
          "F2",
          6.33,
          "F3",
          6.66,
          "G1",
          7,
          "G2",
          7.33,
          "G3",
          7.66,
          10
        ],
        ["var", "ber_max"]
      ],
      [">", ["get", "mean_uhi"], ["var", "mean_uhi_max"]]
    ],
    [255, 0, 0, 1],
    [255, 255, 255, 1]
  ],
  "stroke-width": 0.25,
  "stroke-color": [255, 255, 255, 1],
  "tooltip": [
    { "id": "mean_uhi", "title": "Mean UHI" },
    { "id": "MEDIAN_BER", "title": "Median BER" }
  ],
  "variables": {
    "mean_uhi_min": 0.2,
    "mean_uhi_max": 0.5,
    "ber_min": 2,
    "ber_max": 4
  },
  "jsonform": {
    "type": "object",
    "title": "Data configuration",
    "properties": {
      "mean_uhi_minmax": {
        "title": "UHI",
        "description": "",
        "type": "object",
        "properties": {
          "mean_uhi_min": {
            "type": "number",
            "minimum": 0,
            "format": "range",
            "default": 0.2,
            "step": 0.05
          },
          "mean_uhi_max": {
            "type": "number",
            "maximum": 1,
            "format": "range",
            "default": 0.5,
            "step": 0.05
          }
        },
        "format": "minmax"
      },
      "ber_minmax": {
        "title": "BER",
        "description": "1-7 corresponds to A1-G3 with 0.33 step",
        "type": "object",
        "properties": {
          "ber_min": {
            "type": "number",
            "minimum": 1,
            "format": "range",
            "default": 2,
            "step": 0.1
          },
          "ber_max": {
            "type": "number",
            "maximum": 7,
            "format": "range",
            "default": 4,
            "step": 0.1
          }
        },
        "format": "minmax"
      }
    }
  }
}
